<!-- HTML -->
{% extends "layout.html" %}
{% block content %}
<h2>Add Availability for {{ obj.name }}</h2>
<form method="post">
    {{ form.hidden_tag() }}
    {{ form.weekday.label }} {{ form.weekday() }}<br>
    {{ form.start_time.label }} {{ form.start_time() }}<br>
    {{ form.end_time.label }} {{ form.end_time() }}<br>
    {{ form.submit() }}
</form>

<h3>Existing slots</h3>
<table>
    <tr>
        <th>Day</th>
        <th>Start</th>
        <th>End</th>
        <th>Action</th>
    </tr>
    {% for a in obj.availabilities %}
    <tr>
        <td>{{ ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'][a.weekday] }}</td>
        <td>{{ a.start_time.strftime('%H:%M') }}</td>
        <td>{{ a.end_time.strftime('%H:%M') }}</td>
        <td>
            <form action="{{ url_for('delete_availability', availability_id=a.id) }}" method="post" style="margin:0;">
                <button type="submit" onclick="return confirm('Are you sure you want to delete this slot?');"
                        class="btn btn-danger">
                    Delete
                </button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}