<!-- HTML -->
{% extends "layout.html" %}
{% block content %}
<h2>Dogs</h2>
<a href="{{ url_for('add_dog') }}">Add Dog</a>
<table class="table table-striped table-centered">
    <thead>
    <tr>
        <th colspan="5">Dogs</th>
    </tr>
    <tr>
        <th>Name</th>
        <th>Breed</th>
        <th>Owner (Phone)</th> <!-- Renamed column header -->
        <th>Avail.</th> <!-- Updated Column for Availability -->
        <th>Actions</th>
    </tr>
    </thead>
    {% for dog in dogs %}
    <tr>
        <td>{{ dog.name }}</td>
        <td>{{ dog.breed }}</td>
        <td>{{ dog.owner.name }} ({{ dog.owner.phone }})</td>
        <td>
            <!-- Updated: Show Number of Availability Slots as Link -->
            <a href="{{ url_for('manage_availability', entity='dog', entity_id=dog.id) }}">
                {{ dog.availabilities|length }} Slots
            </a>
        </td>
        <td>
            <!-- Existing Action Buttons -->
            <a href="{{ url_for('edit_dog', dog_id=dog.id) }}">Edit</a>
            |
            <form action="{{ url_for('delete_dog', dog_id=dog.id) }}" method="post" style="display:inline;">
                <button type="submit" onclick="return confirm('Are you sure you want to delete this dog?');">Delete
                </button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}